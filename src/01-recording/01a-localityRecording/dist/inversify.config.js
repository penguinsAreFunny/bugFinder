"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.container = void 0;
var path = require("path");
var bugfinder_localityrecorder_commit_1 = require("bugfinder-localityrecorder-commit");
var bugfinder_framework_1 = require("bugfinder-framework");
var bugfinder_localityrecorder_commitpath_1 = require("bugfinder-localityrecorder-commitpath");
var bugfinder_commitpath_db_mongodb_1 = require("bugfinder-commitpath-db-mongodb");
var bugfinder_framework_defaultcontainer_1 = require("bugfinder-framework-defaultcontainer");
var container = bugfinder_framework_defaultcontainer_1.localityAContainer;
exports.container = container;
var projectRoot = path.join(process.cwd(), "../repositories/TypeScript");
var gitOptions = {
    baseDir: projectRoot,
    maxConcurrentProcesses: 4
};
var mongoDBConfig = {
    url: "mongodb://localhost:27017",
    dbName: "EXPERIMENTAL"
};
var logOptions = {
    debugToConsole: true,
    errorToConsole: true,
    infoToConsole: true,
    traceToConsole: true,
    warnToConsole: true,
    logFile: "./log.txt",
};
// binding localityRecorder and its dependencies
container.bind(bugfinder_framework_1.LOCALITY_RECORDING_TYPES.localityRecordingFactory).to(bugfinder_framework_1.LocalityRecordingFactory);
// bindings used in CommitPathRecorder
container.bind(bugfinder_framework_1.LOCALITY_RECORDING_TYPES.localityRecorder).to(bugfinder_localityrecorder_commitpath_1.CommitPathRecorder);
container.bind(bugfinder_localityrecorder_commitpath_1.BUGFINDER_LOCALITYRECORDER_COMMITPATH_TYPES.commitRecorder).to(bugfinder_localityrecorder_commit_1.CommitRecorder);
container.bind(bugfinder_localityrecorder_commitpath_1.BUGFINDER_LOCALITYRECORDER_COMMITPATH_TYPES.commitToCommitPathMapper).to(bugfinder_localityrecorder_commitpath_1.DefaultCommitPathMapper);
// bindings used in CommitRecorder
container.bind(bugfinder_localityrecorder_commit_1.BUGFINDER_LOCALITYRECORDER_COMMIT_TYPES.gitOptions).toConstantValue(gitOptions);
container.bind(bugfinder_localityrecorder_commit_1.BUGFINDER_LOCALITYRECORDER_COMMIT_TYPES.git).to(bugfinder_localityrecorder_commit_1.GitImpl);
container.bind(bugfinder_localityrecorder_commit_1.BUGFINDER_LOCALITYRECORDER_COMMIT_TYPES.gitCommitParser).to(bugfinder_localityrecorder_commit_1.FormatParser);
container.bind(bugfinder_localityrecorder_commit_1.BUGFINDER_LOCALITYRECORDER_COMMIT_TYPES.madFilesFromCommitParser).to(bugfinder_localityrecorder_commit_1.MADFilesFromLog);
// binding db and its dependencies
container.bind(bugfinder_framework_1.LOCALITY_RECORDING_TYPES.db).to(bugfinder_commitpath_db_mongodb_1.CommitPathsMongoDB);
container.bind(bugfinder_commitpath_db_mongodb_1.BUGFINDER_DB_COMMITPATH_MONGODB_TYPES.mongoDBConfig).toConstantValue(mongoDBConfig);
// binding Logger
container.bind(bugfinder_framework_1.SHARED_TYPES.logger).to(bugfinder_framework_1.FileAndConsoleLogger);
container.bind(bugfinder_framework_1.SHARED_TYPES.logConfig).toConstantValue(logOptions);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW52ZXJzaWZ5LmNvbmZpZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL2ludmVyc2lmeS5jb25maWcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsMkJBQThCO0FBQzlCLHVGQUcyQztBQUMzQywyREFNNkI7QUFFN0IsK0ZBSStDO0FBQy9DLG1GQUEwRztBQUMxRyw2RkFBd0U7QUFJeEUsSUFBTSxTQUFTLEdBQUcseURBQWtCLENBQUM7QUEyQzdCLDhCQUFTO0FBMUNqQixJQUFNLFdBQVcsR0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSw0QkFBNEIsQ0FBQyxDQUFBO0FBRWxGLElBQU0sVUFBVSxHQUFlO0lBQzNCLE9BQU8sRUFBRSxXQUFXO0lBQ3BCLHNCQUFzQixFQUFFLENBQUM7Q0FDNUIsQ0FBQTtBQUVELElBQU0sYUFBYSxHQUFrQjtJQUNqQyxHQUFHLEVBQUUsMkJBQTJCO0lBQ2hDLE1BQU0sRUFBRSxjQUFjO0NBQ3pCLENBQUE7QUFFRCxJQUFNLFVBQVUsR0FBYztJQUMxQixjQUFjLEVBQUUsSUFBSTtJQUNwQixjQUFjLEVBQUUsSUFBSTtJQUNwQixhQUFhLEVBQUUsSUFBSTtJQUNuQixjQUFjLEVBQUUsSUFBSTtJQUNwQixhQUFhLEVBQUUsSUFBSTtJQUNuQixPQUFPLEVBQUUsV0FBVztDQUN2QixDQUFBO0FBRUQsZ0RBQWdEO0FBQ2hELFNBQVMsQ0FBQyxJQUFJLENBQXVDLDhDQUF3QixDQUFDLHdCQUF3QixDQUFDLENBQUMsRUFBRSxDQUFDLDhDQUF3QixDQUFDLENBQUE7QUFFcEksc0NBQXNDO0FBQ3RDLFNBQVMsQ0FBQyxJQUFJLENBQStCLDhDQUF3QixDQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxDQUFDLDBEQUFrQixDQUFDLENBQUE7QUFDOUcsU0FBUyxDQUFDLElBQUksQ0FBMkIsbUZBQTJDLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxDQUFDLGtEQUFjLENBQUMsQ0FBQTtBQUN2SCxTQUFTLENBQUMsSUFBSSxDQUEyQixtRkFBMkMsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLEVBQUUsQ0FBQywrREFBdUIsQ0FBQyxDQUFBO0FBRTFJLGtDQUFrQztBQUNsQyxTQUFTLENBQUMsSUFBSSxDQUFhLDJFQUF1QyxDQUFDLFVBQVUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsQ0FBQTtBQUMxRyxTQUFTLENBQUMsSUFBSSxDQUFNLDJFQUF1QyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQywyQ0FBTyxDQUFDLENBQUE7QUFDNUUsU0FBUyxDQUFDLElBQUksQ0FBZSwyRUFBdUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxFQUFFLENBQUMsZ0RBQVksQ0FBQyxDQUFBO0FBQ3RHLFNBQVMsQ0FBQyxJQUFJLENBQXFCLDJFQUF1QyxDQUFDLHdCQUF3QixDQUFDLENBQUMsRUFBRSxDQUFDLG1EQUFlLENBQUMsQ0FBQTtBQUV4SCxrQ0FBa0M7QUFDbEMsU0FBUyxDQUFDLElBQUksQ0FBMkIsOENBQXdCLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLG9EQUFrQixDQUFDLENBQUM7QUFDN0YsU0FBUyxDQUFDLElBQUksQ0FBZ0IsdUVBQXFDLENBQUMsYUFBYSxDQUFDLENBQUMsZUFBZSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBRWxILGlCQUFpQjtBQUNqQixTQUFTLENBQUMsSUFBSSxDQUFTLGtDQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLDBDQUFvQixDQUFDLENBQUE7QUFDcEUsU0FBUyxDQUFDLElBQUksQ0FBWSxrQ0FBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsQ0FBQSJ9